<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="RoomReservationDAO">
	<select id="selectListRoomReservation" resultType="roomreservation"
		parameterType="String">
		SELECT * FROM ROOMRESERVATION WHERE TO_CHAR(ROOMRESERVATION_STAYDAY, 'YYYYMMDD') = #{selectedDate}
	</select>
	<insert id="insertReservation" parameterType="roomreservation">
		INSERT INTO ROOMRESERVATION	
		(ROOMRESERVATION_NO, ROOMRESERVATION_ROOMNO, ROOMRESERVATION_ROOMPRICE, ROOMRESERVATION_ROOMSALERATE, ROOMRESERVATION_ROOMNAME, ROOMRESERVATION_MEMBERNO, ROOMRESERVATION_STAYDAY, ROOMRESERVATION_PAYDAY, ROOMRESERVATION_FOODNO,ROOMRESERVATION_FOODNAME,ROOMRESERVATION_TOYNO,ROOMRESERVATION_TOYNAME,ROOMRESERVATION_PICKUPYN,ROOMRESERVATION_PICKUPTIME,ROOMRESERVATION_PICKUPADDRESS,ROOMRESERVATION_PICKUPPHONENUM,ROOMRESERVATION_PICKUPANIMAL,ROOMRESERVATION_PICKUPOWNER,ROOMRESERVATION_PICKUPNOTE,ROOMRESERVATION_USEPOINTYN,ROOMRESERVATION_USEPOINT,ROOMRESERVATION_PLUSPOINT,ROOMRESERVATION_FIANLFEE) 
		VALUES((select nvl(max(ROOMRESERVATION_NO), 0)+1 from ROOMRESERVATION),#{ROOMRESERVATION_ROOMNO},#{ROOMRESERVATION_ROOMPRICE},#{ROOMRESERVATION_ROOMSALERATE},#{ROOMRESERVATION_ROOMNAME},#{ROOMRESERVATION_MEMBERNO},#{ROOMRESERVATION_STAYDAY},sysdate,#{ROOMRESERVATION_FOODNO},#{ROOMRESERVATION_FOODNAME},#{ROOMRESERVATION_TOYNO},#{ROOMRESERVATION_TOYNAME},#{ROOMRESERVATION_PICKUPYN},#{ROOMRESERVATION_PICKUPTIME},#{ROOMRESERVATION_PICKUPADDRESS},#{ROOMRESERVATION_PICKUPPHONENUM},#{ROOMRESERVATION_PICKUPANIMAL},#{ROOMRESERVATION_PICKUPOWNER},#{ROOMRESERVATION_PICKUPNOTE},#{ROOMRESERVATION_USEPOINTYN},#{ROOMRESERVATION_USEPOINT},#{ROOMRESERVATION_PLUSPOINT},#{ROOMRESERVATION_FIANLFEE})
	</insert>
	<select id="selectRoomReservation" parameterType="roomreservation" resultType="roomreservation">
		SELECT * FROM ROOMRESERVATION 
		WHERE ROOMRESERVATION_NO = #{ROOMRESERVATION_NO}
	</select>
	<select id="selectCountReservation" parameterType="roomreservation" resultType="int">
		SELECT count(*) FROM ROOMRESERVATION WHERE ROOMRESERVATION_MEMBERNO = #{ROOMRESERVATION_MEMBERNO} 
	</select>
	<select id="selectMyRoomReservationList" parameterType="roomreservation" resultType="roomreservation">
		SELECT * FROM ROOMRESERVATION
		WHERE ROOMRESERVATION_MEMBERNO = #{ROOMRESERVATION_MEMBERNO}
		ORDER BY ROOMRESERVATION_STAYDAY DESC, ROOMRESERVATION_NO DESC		
	</select>
	<update id="updateMemberPoint" parameterType="MemberVO">
		UPDATE MEMBER 
		SET POINT = #{point}
		WHERE ID = #{id}
	</update>
		
	
</mapper>
